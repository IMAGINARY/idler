!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("universal-perf-hooks"),require("events")):"function"==typeof define&&define.amd?define(["exports","universal-perf-hooks","events"],e):e((t||self).idler={},t.universalPerfHooks,t.events)}(this,function(t,e,i){function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function s(t,e,i){return(s=r()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var s=new(Function.bind.apply(t,r));return i&&n(s,i.prototype),s}).apply(null,arguments)}var o=setTimeout(function(){},0),u=function(){function t(t,e,i,n){var r=this;this.timeoutId=o,this.idle=t,this.repeat=e,this.func=i,this.timeoutDelay=n,this.args=[].slice.call(arguments,4),this.testTimeoutCb=function(){return r.testTimeout()},this.testTimeout()}var e=t.prototype;return e.reset=function(){clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.testTimeoutCb,this.timeoutDelay)},e.clear=function(){clearTimeout(this.timeoutId)},e.testTimeout=function(){var t=this.idle.getIdleTime();t>=this.timeoutDelay?(this.repeat&&this.reset(),this.func.apply(this,this.args)):this.timeoutId=setTimeout(this.testTimeoutCb,this.timeoutDelay-t)},t}();function c(){return e.performance.now()}t.Idler=function(t){var e,i;function r(){var e;return(e=t.call(this)||this).lastId=0,e.timers=new Map,e.lastEventTimestampMs=c(),e}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,n(e,i);var o=r.prototype;return o.setTimeout=function(t,e){this.lastId+=1;var i=this.lastId;return this.timers.set(i,s(u,[this,!1,t,e].concat([].slice.call(arguments,2)))),i},o.setInterval=function(t,e){this.lastId+=1;var i=this.lastId;return this.timers.set(i,s(u,[this,!0,t,e].concat([].slice.call(arguments,2)))),i},o.clearTimeout=function(t){var e=this.timers.get(t);void 0!==e&&e.clear(),this.timers.delete(t)},o.clearInterval=function(t){this.clearTimeout(t)},o.clear=function(){this.timers.forEach(function(t){return t.clear()}),this.timers.clear()},o.interrupt=function(){this.lastEventTimestampMs=Math.max(c(),this.lastEventTimestampMs),this.emit("interrupted")},o.getIdleTime=function(){return c()-this.lastEventTimestampMs},r}(i.EventEmitter)});
//# sourceMappingURL=idler.umd.js.map
